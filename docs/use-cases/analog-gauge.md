# 指针式仪表读取

## 场景描述

通过计算机视觉识别指针角度，将模拟量仪表的读数数字化。

## 适用设备

- 压力表（化工厂、锅炉房）
- 流量计
- 电压表 / 电流表
- 温度计（指针式）
- 转速表
- 各类圆形刻度盘仪表

## 技术实现

### 核心算法

#### 1. 表盘定位
- **YOLOv8-Nano**：目标检测，定位表盘区域
- 轻量级模型，适合边缘设备运行

#### 2. 指针检测
- **Hough 变换**：检测直线，识别指针
- 计算指针角度

#### 3. 角度映射
- 根据校准数据，将角度映射为具体数值
- 线性插值或查表法

### 预处理流程
1. **透视变换**：校正拍摄角度
2. **圆形检测**：定位表盘边界
3. **去噪处理**：消除干扰

## 配置步骤

1. **对准摄像头**：将摄像头对准仪表盘
2. **框选区域**：在 Web 界面框选仪表区域
3. **设置参数**：
   - 类型：指针
   - 量程：如 0-10 MPa
   - 单位：如 MPa
4. **校准**：
   - 点击"0刻度"位置
   - 点击"满刻度"位置
5. **测试验证**：观察实时识别结果

## 校准原理

```
           满刻度位置
              ↑
         ╱─────────╲
        │     ●     │  ← 指针
        │    ╱      │
        │   ╱       │
         ╲─────────╱
              ↓
           0刻度位置
```

用户只需点击 0 刻度和满刻度的位置，系统自动计算：
- 刻度起始角度
- 刻度范围角度
- 角度与数值的映射关系

## 技术难点

### 多指针仪表
**问题**：部分仪表有多个指针（如水表）

**解决方案**：
- 多目标检测
- 按颜色/粗细区分指针

### 指针遮挡
**问题**：指针被反光或污渍遮挡

**解决方案**：
- 多帧融合
- 轨迹预测

### 非线性刻度
**问题**：某些仪表刻度非线性分布

**解决方案**：
- 多点校准
- 曲线拟合

## 最佳实践

1. 摄像头尽量正对表盘中心
2. 确保整个表盘在画面内
3. 避免强光反射
4. 校准时确保指针稳定

## 相关文档

- [核心算法详解](../architecture/algorithms.md)
- [技术挑战与对策](../roadmap/challenges.md)
